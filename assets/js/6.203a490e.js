(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{282:function(e,a,t){"use strict";t.r(a);var v=t(0),_=Object(v.a)({},(function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("p",[e._v("ç¼“å­˜å¯¹äºå‰ç«¯æ€§èƒ½ä¼˜åŒ–ç­‰æ–¹é¢éƒ½æœ‰ç€é‡è¦æ„ä¹‰ã€‚è¿™ç¯‡æŠŠHTTPç¼“å­˜ç›¸å…³çš„çŸ¥è¯†ç‚¹æ€»åœ¨è¿™é‡Œï¼Œéƒ¨åˆ†å†…å®¹è‡ªå·±é‡æ–°æè¿°äº†ä¸€ä¸‹ï¼ŒåŠ æ·±ç†è§£ã€‚")]),e._v(" "),t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"custom-block-title"},[e._v("TODOS")]),e._v(" "),t("ul",[t("li",[e._v("RFC2616 Capter 13: Caching in HTTP")])])]),e._v(" "),t("h1",{attrs:{id:"http-caching-http-ç¼“å­˜"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#http-caching-http-ç¼“å­˜"}},[e._v("#")]),e._v(" HTTP Caching - HTTP ç¼“å­˜")]),e._v(" "),t("TOC"),e._v(" "),t("h2",{attrs:{id:"å¯èƒ½è¿›è¡Œç¼“å­˜çš„å†…å®¹"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å¯èƒ½è¿›è¡Œç¼“å­˜çš„å†…å®¹"}},[e._v("#")]),e._v(" å¯èƒ½è¿›è¡Œç¼“å­˜çš„å†…å®¹")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("GET")]),e._v("è¯·æ±‚çš„"),t("code",[e._v("200 OK")]),e._v("å“åº”ï¼Œå¯èƒ½æ˜¯HTMLæ–‡æ¡£ã€å›¾ç‰‡ã€æ–‡ä»¶ç­‰èµ„æºã€‚")]),e._v(" "),t("li",[t("code",[e._v("301 Moved Permanently")])]),e._v(" "),t("li",[t("code",[e._v("404 Not Found")])]),e._v(" "),t("li",[t("code",[e._v("206 Partial Content")])]),e._v(" "),t("li",[t("code",[e._v("GET")]),e._v("è¯·æ±‚ä»¥å¤–çš„ã€å®šä¹‰äº†"),t("code",[e._v("cache key")]),e._v("çš„å†…å®¹")])]),e._v(" "),t("h2",{attrs:{id:"ç¼“å­˜ç±»å‹"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ç¼“å­˜ç±»å‹"}},[e._v("#")]),e._v(" ç¼“å­˜ç±»å‹")]),e._v(" "),t("ul",[t("li",[e._v("ç§æœ‰ "),t("code",[e._v("private")]),e._v("ï¼šåªèƒ½è¢«ç‰¹å®šç”¨æˆ·ä½¿ç”¨ï¼Œæ¯”å¦‚æµè§ˆå™¨ç¼“å­˜")]),e._v(" "),t("li",[e._v("å…¬æœ‰/å…±äº« "),t("code",[e._v("public")]),e._v("/"),t("code",[e._v("shared")]),e._v("ï¼šå¯ä»¥è¢«å¤šä¸ªç”¨æˆ·ä½¿ç”¨ï¼Œæ¯”å¦‚ä»£ç†ç¼“å­˜ã€CDNç¼“å­˜ç­‰")])]),e._v(" "),t("h2",{attrs:{id:"ç¼“å­˜æ§åˆ¶"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ç¼“å­˜æ§åˆ¶"}},[e._v("#")]),e._v(" ç¼“å­˜æ§åˆ¶")]),e._v(" "),t("h3",{attrs:{id:"related-http-headers"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#related-http-headers"}},[e._v("#")]),e._v(" Related HTTP Headers")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("Age")])]),e._v(" "),t("li",[t("a",{attrs:{href:"#cache-control-header"}},[t("code",[e._v("Cache-Control")])]),e._v(" ("),t("code",[e._v("Pragma")]),e._v(" in "),t("code",[e._v("HTTP/1.0")]),e._v(")")]),e._v(" "),t("li",[t("code",[e._v("Expires")])]),e._v(" "),t("li",[t("code",[e._v("ETag")])]),e._v(" "),t("li",[t("code",[e._v("If-Match")])]),e._v(" "),t("li",[t("code",[e._v("If-None-Match")])]),e._v(" "),t("li",[t("code",[e._v("If-Range")])]),e._v(" "),t("li",[t("code",[e._v("If-Modified-Since")])]),e._v(" "),t("li",[t("code",[e._v("If-Unmodified-Since")])]),e._v(" "),t("li",[t("code",[e._v("Last-Modified")])]),e._v(" "),t("li",[t("code",[e._v("Vary")])])]),e._v(" "),t("h4",{attrs:{id:"age-header"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#age-header"}},[e._v("#")]),e._v(" Age Header")]),e._v(" "),t("p",[e._v("Syntax:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("Age: <seconds>\n")])])]),t("p",[e._v("Example:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("Age: 24\n")])])]),t("p",[e._v("Type: Response Header")]),e._v(" "),t("p",[e._v("å€¼ä¸ºsecondsæ•°ï¼Œä»…åœ¨å“åº”ä¸­å‡ºç°ï¼Œè¡¨æ˜è¯¥èµ„æºåœ¨ç¼“å­˜ç³»ç»Ÿä¸­å­˜åœ¨çš„æ—¶é—´ã€‚å¦‚æœ"),t("code",[e._v("Age: 0")]),e._v("ï¼Œåˆ™è¡¨æ˜è¯¥èµ„æºåˆšåˆšä»æºæœåŠ¡å™¨è·å–ã€‚")]),e._v(" "),t("p",[e._v("ä»»ä½•åŒ…å«ç¼“å­˜ç³»ç»Ÿçš„"),t("code",[e._v("HTTP/1.1")]),e._v("æœåŠ¡å™¨ï¼Œç¼“å­˜ç³»ç»Ÿçš„å“åº”å¿…é¡»(MUST)è¿”å›"),t("code",[e._v("Age")]),e._v(" Headerã€‚")]),e._v(" "),t("p",[t("code",[e._v("Age")]),e._v("çš„å€¼åº”è¯¥(SHOULD)è‡³å°‘ä¸º31 bitsã€‚å¦‚æœå€¼overflowäº†ï¼Œåˆ™å¿…é¡»(MUST)è¿”å›"),t("code",[e._v("2147483648 (2^31)")]),e._v("ã€‚")]),e._v(" "),t("h4",{attrs:{id:"cache-control-header"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#cache-control-header"}},[e._v("#")]),e._v(" Cache-Control Header")]),e._v(" "),t("p",[e._v("Examples:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("Cache-Control: no-cache no-store must-revalidate\nCache-Control: max-age=3600 must-revalidate\n")])])]),t("p",[e._v("Type: General Header")]),e._v(" "),t("p",[t("code",[e._v("Cache-Control")]),e._v("åœ¨"),t("code",[e._v("HTTP/1.1")]),e._v("ä¸­åŠ å…¥ã€‚åœ¨"),t("code",[e._v("HTTP/1.0")]),e._v("ä¸­ä¸èƒ½ä½¿ç”¨"),t("code",[e._v("Cache-Control")]),e._v("ï¼Œåªèƒ½ä½¿ç”¨"),t("code",[e._v("Pragma: no-cache")]),e._v("ã€‚")]),e._v(" "),t("p",[t("code",[e._v("Cache-Control")]),e._v("ä¸‹çš„æŒ‡ä»¤åœ¨é€šè¿‡ proxy å’Œ gateway application æ—¶å¿…é¡»è¢«ä¼ é€’ï¼Œå› ä¸ºåœ¨ request/response chain ä¸­çš„ä»»ä½•éƒ¨åˆ†éƒ½å¯èƒ½ä¼šè¢«ç”¨åˆ°ã€‚")]),e._v(" "),t("p",[t("code",[e._v("Cache-Control")]),e._v("å¯èƒ½ä½¿ç”¨çš„æŒ‡ä»¤(Directives)æœ‰ï¼š")]),e._v(" "),t("blockquote",[t("p",[e._v("æ³¨ï¼š"),t("code",[e._v("[...]")]),e._v("å†…ä»£è¡¨å¯é€‰å‚æ•°")])]),e._v(" "),t("ul",[t("li",[t("strong",[e._v("Cacheability")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("public")]),e._v(": è¡¨æ˜è¯¥å“åº”å¯ä»¥(MAY)è¢«ä»»ä½•ç±»å‹ç¼“å­˜ã€‚(response only)")]),e._v(" "),t("li",[t("code",[e._v('private[="<field-name>"]')]),e._v(": è¡¨æ˜è¯¥å“åº”æ˜¯é’ˆå¯¹å•ä¸ªç”¨æˆ·çš„ï¼Œåªèƒ½(MAY)è¢«ç§æœ‰ç¼“å­˜ï¼Œä¸èƒ½(MUST NOT)è¢«å…±äº«ç¼“å­˜ã€‚(response only)")])])])]),e._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[e._v("PS")]),e._v(" "),t("p",[e._v("å¯ä»¥é€šè¿‡"),t("code",[e._v("field-name")]),e._v("å¯¹ä¸ªåˆ«ç¼“å­˜ç³»ç»Ÿè¿›è¡Œé™å®šï¼Œä½†æ²¡å¤ªææ‡‚è¿™é‡Œçš„"),t("code",[e._v("field-name")]),e._v("æŒ‡çš„æ˜¯ä»€ä¹ˆã€‚ä¸€èˆ¬éƒ½ä¸æŒ‡å®š"),t("code",[e._v("field-name")]),e._v("ï¼Œä»£è¡¨é’ˆå¯¹æ‰€æœ‰ç¼“å­˜ç³»ç»Ÿã€‚ç›®å‰MDNçš„æ–‡æ¡£ä¸Šå°±æ²¡å†™"),t("code",[e._v("field-name")]),e._v("ã€‚")])]),e._v(" "),t("ul",[t("li",[t("p",[t("strong",[e._v("Expiration")])]),e._v(" "),t("ul",[t("li",[t("code",[e._v("max-age=<seconds>")]),e._v(": åœ¨è¯·æ±‚ä¸­å‡ºç°ï¼Œè¡¨æ˜å®¢æˆ·ç«¯æ„¿æ„æ¥æ”¶çš„èµ„æºçš„æœ€å¤§ageï¼Œå¦‚æœæ²¡æœ‰"),t("code",[e._v("max-stale")]),e._v("ä¸€èµ·å‡ºç°ï¼Œåˆ™æ‹’ç»æ¥æ”¶è¿‡æœŸèµ„æºã€‚åœ¨å“åº”ä¸­å‡ºç°ï¼Œè¡¨æ˜è®¾ç½®è¯¥å“åº”èµ„æºçš„æœ€å¤§è¿‡æœŸæ—¶é—´ã€‚(request & response)")]),e._v(" "),t("li",[t("code",[e._v("min-fresh=<seconds>")]),e._v(": è¡¨æ˜å®¢æˆ·ç«¯å¸Œæœ›æ¥æ”¶åˆ°çš„èµ„æºçš„æœ€ä½å‰©ä½™æ–°é²œåº¦ï¼Œå³è·ç¦»è¿‡æœŸè¿˜å‰©çš„æœ€å°‘æ—¶é—´ã€‚(request only)")]),e._v(" "),t("li",[t("code",[e._v("max-stale[=<seconds>]")]),e._v(": è¡¨æ˜å®¢æˆ·ç«¯æ„¿æ„æ¥æ”¶è¿‡æœŸèµ„æºã€‚å¦‚æœé™å®šäº†"),t("code",[e._v("<seconds>")]),e._v("ï¼Œåˆ™è¡¨æ˜æ„¿æ„æ¥æ”¶è¿‡æœŸæ—¶é—´ä¸è¶…è¿‡"),t("code",[e._v("<seconds>")]),e._v("çš„èµ„æºã€‚å¦‚æœä¸é™å®šï¼Œåˆ™è¡¨æ˜æ„¿æ„æ¥æ”¶ä»»ä½•è¿‡æœŸèµ„æºã€‚")]),e._v(" "),t("li",[t("code",[e._v("s-maxage=<seconds>")]),e._v(": åªé’ˆå¯¹å…±äº«ç¼“å­˜ï¼Œä¸é’ˆå¯¹ç§æœ‰ç¼“å­˜ï¼ˆè¢«ç§æœ‰ç¼“å­˜å¿½ç•¥ï¼‰ã€‚"),t("code",[e._v("s-maxage")]),e._v("å°†è¦†ç›–æ‰€æœ‰å…¶ä»–çš„"),t("code",[e._v("max-age")]),e._v("æŒ‡ä»¤æˆ–"),t("code",[e._v("Expires")]),e._v(" Headeræ‰€è®¾å®šçš„è¿‡æœŸæ—¶é—´ã€‚(response only)")])])]),e._v(" "),t("li",[t("p",[t("strong",[e._v("Revalidation and reloading")])]),e._v(" "),t("ul",[t("li",[t("code",[e._v('no-cache[="<field-name>"]')]),e._v(": ä¸è®ºç¼“å­˜èµ„æºæ˜¯å¦è¿‡æœŸï¼Œå¼ºåˆ¶ç¼“å­˜ç³»ç»Ÿå‘æœåŠ¡å™¨è¿›è¡ŒéªŒè¯ï¼Œé¿å…ä»ç¼“å­˜ç³»ç»Ÿä¸­è·å–åˆ°è¿‡æœŸèµ„æºï¼ˆ"),t("strong",[e._v("æ³¨æ„ï¼šä¸æ˜¯è¯´æ²¡æœ‰ç¼“å­˜ï¼Œåªæ˜¯å¿…é¡»å†æ¬¡éªŒè¯ï¼Œé¿å…è·å–åˆ°è¿‡æœŸèµ„æºã€‚å¦‚æœéªŒè¯ç»“æœæ˜¯"),t("code",[e._v("304 Not Modified")]),e._v("åˆ™å¯ä»¥ä½¿ç”¨ç¼“å­˜å‰¯æœ¬")]),e._v("ï¼‰ã€‚å¦‚æœåœ¨è¯·æ±‚ä¸­å‡ºç°"),t("code",[e._v("no-cache")]),e._v("ï¼Œåˆ™ä¸åº”è¯¥(SHOULD NOT)å†å‡ºç°"),t("code",[e._v("min-fresh")]),e._v(", "),t("code",[e._v("max-stale")]),e._v("æˆ–"),t("code",[e._v("max-age")]),e._v("ã€‚(request & response)")]),e._v(" "),t("li",[t("code",[e._v("only-if-cached")]),e._v(": åœ¨å‘é€è¯·æ±‚æ—¶åŠ å…¥ï¼Œåªè¯·æ±‚å·²ç¼“å­˜çš„èµ„æºï¼Œé¿å…å‘æºæœåŠ¡å™¨é‡è½½æˆ–éªŒè¯ã€‚æ­¤æ—¶ç¼“å­˜æœåŠ¡å™¨åº”å½“è¿”å›ä¸€ä¸ªç¼“å­˜å‰¯æœ¬ï¼Œæˆ–è€…"),t("code",[e._v("504 Gateway Timeout")]),e._v("ã€‚å¦‚æœé…ç½®äº†ç¼“å­˜é›†ç¾¤ï¼Œåˆ™å¯ä»¥å°†è¯¥è¯·æ±‚åˆ†å‘åˆ°ç¼“å­˜é›†ç¾¤ä¸­ã€‚(request only)")]),e._v(" "),t("li",[t("code",[e._v("must-revalidate")]),e._v(": åªèƒ½åœ¨å“åº”ä¸­å‡ºç°ï¼Œè¡¨æ˜è¯¥å“åº”èµ„æºçš„ç¼“å­˜ä¸€æ—¦è¿‡æœŸï¼Œå¿…é¡»å‘æºæœåŠ¡å™¨å‘é€é‡éªŒè¯ï¼Œè€Œä¸èƒ½å°†è¿‡æœŸèµ„æºæä¾›ç»™å®¢æˆ·ç«¯ã€‚å¦‚æœç¼“å­˜ç³»ç»Ÿä¸èƒ½è®¿é—®åˆ°æºæœåŠ¡å™¨è¿›è¡Œé‡éªŒè¯ï¼Œåˆ™è¿”å›"),t("code",[e._v("504 Gateway Timeout")]),e._v("ï¼Œä¸èƒ½è¿”å›æœªéªŒè¯çš„è¿‡æœŸèµ„æºã€‚ä¸€æ—¦è®¾ç½®"),t("code",[e._v("must-revalidate")]),e._v("ï¼Œåˆ™å¿½ç•¥å®¢æˆ·ç«¯è¯·æ±‚çš„"),t("code",[e._v("max-stale")]),e._v("ï¼Œä»…éµå®ˆæºæœåŠ¡å™¨æä¾›çš„"),t("code",[e._v("max-age")]),e._v("æˆ–è€…"),t("code",[e._v("Expires")]),e._v("ã€‚(response only)")]),e._v(" "),t("li",[t("code",[e._v("proxy-revalidate")]),e._v(": åªèƒ½åœ¨å“åº”ä¸­å‡ºç°ï¼Œä¸"),t("code",[e._v("must-revalidate")]),e._v("ä½œç”¨ç›¸åŒï¼Œä½†ä»…å¯¹éå…±äº«ç¼“å­˜/ç§æœ‰ç¼“å­˜æœ‰æ•ˆã€‚(response only)")])])]),e._v(" "),t("li",[t("p",[t("strong",[e._v("Other")])]),e._v(" "),t("ul",[t("li",[t("code",[e._v("no-store")]),e._v(": ç¦æ­¢ç¼“å­˜ç³»ç»Ÿå¯¹èµ„æºè¿›è¡Œä»»ä½•å­˜å‚¨ï¼Œå³ç¦æ­¢ä½¿ç”¨ç¼“å­˜ã€‚å¦‚æœåœ¨è¯·æ±‚ä¸­å‡ºç°ï¼Œåˆ™ç¼“å­˜ç³»ç»Ÿä¸èƒ½(MUST NOT)å­˜å‚¨è¯¥è¯·æ±‚çš„ä»»ä½•éƒ¨åˆ†ï¼Œä»¥åŠé’ˆå¯¹è¯¥è¯·æ±‚çš„å“åº”ã€‚å¦‚æœåœ¨å“åº”ä¸­å‡ºç°ï¼Œåˆ™ç¼“å­˜ç³»ç»Ÿä¸èƒ½(MUST NOT)å­˜å‚¨è¯¥å“åº”çš„ä»»ä½•éƒ¨åˆ†ï¼Œä»¥åŠå¼•å‘è¯¥å“åº”çš„è¯·æ±‚ã€‚â€œä¸èƒ½(MUST NOT)å­˜å‚¨â€çš„æ„æ€æ˜¯ï¼Œç¼“å­˜ç³»ç»Ÿä¸èƒ½æœ‰æ„åœ°å°†å…¶å­˜å‚¨åˆ°éæ˜“å¤±æ€§å­˜å‚¨å™¨ä¸­ï¼Œä¸”åœ¨åˆ†å‘å®Œç›¸å…³èµ„æºåï¼Œç«‹å³ä»æ˜“å¤±æ€§å­˜å‚¨å™¨ä¸­ç§»é™¤ã€‚ä¸»è¦æ˜¯ä¸ºäº†é¿å…æ•æ„Ÿä¿¡æ¯çš„æ³„éœ²ï¼Œä½†æ¶æ„ç¼“å­˜æœåŠ¡å™¨å¯ä»¥é€‰æ‹©ä¸éµå®ˆæ­¤è§„å®šï¼Œå¹¶ä¸”æµè§ˆå™¨çš„å†å²è®°å½•Bufferæ˜¯ä¼šæ­£å¸¸å­˜å‚¨ç›¸å…³èµ„æºçš„ã€‚(request & response)")]),e._v(" "),t("li",[t("code",[e._v("no-transform")]),e._v(": ç¦æ­¢ç¼“å­˜ç³»ç»Ÿå¯¹èµ„æºè¿›è¡Œè½¬æ¢ï¼Œç¦æ­¢ç¼“å­˜ç³»ç»Ÿå’Œä»£ç†æœåŠ¡å™¨æ”¹å˜ç›¸å…³çš„Headers("),t("code",[e._v("Content-Encoding")]),e._v(", "),t("code",[e._v("Content-Range")]),e._v(", "),t("code",[e._v("Content-Type")]),e._v(")ã€‚ç¼“å­˜ç³»ç»Ÿå¸¸å¸¸ä¼šæŠŠæŸäº›åª’ä½“ç±»å‹è¿›è¡Œè½¬æ¢ï¼Œç”¨ä»¥èŠ‚çœç¼“å­˜å­˜å‚¨ç©ºé—´ï¼Œæˆ–é™ä½ä¼ è¾“è´Ÿè½½ï¼Œè€Œ"),t("code",[e._v("no-transform")]),e._v(" Headerç¦æ­¢è¿›è¡Œä»»ä½•è½¬æ¢ã€‚(request & response)")])])])]),e._v(" "),t("h5",{attrs:{id:"è¯·æ±‚å’Œå“åº”ä¸­çš„cache-controlå°ç»“"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#è¯·æ±‚å’Œå“åº”ä¸­çš„cache-controlå°ç»“"}},[e._v("#")]),e._v(" è¯·æ±‚å’Œå“åº”ä¸­çš„"),t("code",[e._v("Cache-Control")]),e._v("å°ç»“")]),e._v(" "),t("ul",[t("li",[t("p",[e._v("Cache Request Directives")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("no-store")]),e._v(": ç¼“å­˜ç³»ç»Ÿä¸èƒ½(MUST NOT)å­˜å‚¨è¯¥è¯·æ±‚çš„ä»»ä½•éƒ¨åˆ†ï¼Œä»¥åŠé’ˆå¯¹è¯¥è¯·æ±‚çš„å“åº”ã€‚")]),e._v(" "),t("li",[t("code",[e._v("no-cache")]),e._v(": æ— è®ºèµ„æºæ˜¯å¦è¿‡æœŸï¼Œç¼“å­˜ç³»ç»Ÿå¿…é¡»å‘æºæœåŠ¡å™¨å‘é€éªŒè¯ã€‚")]),e._v(" "),t("li",[t("code",[e._v("no-transform")]),e._v(": ç¦æ­¢ç¼“å­˜ç³»ç»Ÿå¯¹èµ„æºè¿›è¡Œè½¬æ¢ã€‚")]),e._v(" "),t("li",[t("code",[e._v("only-if-cached")]),e._v(": åªæ¥æ”¶å·²ç¼“å­˜èµ„æºï¼Œé¿å…å‘æºæœåŠ¡å™¨è¯·æ±‚ã€‚")]),e._v(" "),t("li",[t("code",[e._v("max-age=<seconds>")]),e._v(": è¡¨æ˜å®¢æˆ·ç«¯æ„¿æ„æ¥æ”¶çš„èµ„æºçš„æœ€å¤§ageã€‚å¦‚æœæ²¡æœ‰"),t("code",[e._v("max-stale")]),e._v("ä¸€èµ·å‡ºç°ï¼Œåˆ™æ‹’ç»æ¥æ”¶è¿‡æœŸèµ„æºã€‚")]),e._v(" "),t("li",[t("code",[e._v("max-stale[=<seconds>]")]),e._v(": è¡¨æ˜å®¢æˆ·ç«¯æ„¿æ„æ¥æ”¶è¿‡æœŸèµ„æºã€‚å¦‚æœæœ‰å‚æ•°ï¼Œåˆ™èµ„æºçš„è¿‡æœŸæ—¶é—´ä¸èƒ½è¶…è¿‡"),t("code",[e._v("<seconds>")]),e._v("ã€‚")]),e._v(" "),t("li",[t("code",[e._v("min-fresh=<seconds>")]),e._v(": è¡¨æ˜å®¢æˆ·ç«¯æ„¿æ„æ¥æ”¶çš„èµ„æºè‡³å°‘è¿˜æœ‰å¤šä¹…è¿‡æœŸã€‚")])])]),e._v(" "),t("li",[t("p",[e._v("Cache Response Directives")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("public")]),e._v(": å…è®¸å…±äº«å’Œç§æœ‰ç¼“å­˜ã€‚")]),e._v(" "),t("li",[t("code",[e._v("private")]),e._v(": ä»…å…è®¸ç§æœ‰ç¼“å­˜ã€‚")]),e._v(" "),t("li",[t("code",[e._v("no-store")]),e._v(": ç¼“å­˜ç³»ç»Ÿä¸èƒ½(MUST NOT)å­˜å‚¨è¯¥å“åº”çš„ä»»ä½•éƒ¨åˆ†ï¼Œä»¥åŠå¼•å‘è¯¥å“åº”çš„è¯·æ±‚ã€‚")]),e._v(" "),t("li",[t("code",[e._v("no-cache")]),e._v(": æ— è®ºèµ„æºæ˜¯å¦è¿‡æœŸï¼Œç¼“å­˜ç³»ç»Ÿå¿…é¡»å‘æºæœåŠ¡å™¨å‘é€éªŒè¯ã€‚")]),e._v(" "),t("li",[t("code",[e._v("no-transform")]),e._v(": ç¦æ­¢ç¼“å­˜ç³»ç»Ÿå¯¹èµ„æºè¿›è¡Œè½¬æ¢ã€‚")]),e._v(" "),t("li",[t("code",[e._v("must-revalidate")]),e._v(": è¡¨æ˜è¯¥å“åº”èµ„æºçš„ç¼“å­˜ä¸€æ—¦è¿‡æœŸï¼Œå¿…é¡»å‘æºæœåŠ¡å™¨å‘é€é‡éªŒè¯ï¼Œè€Œä¸èƒ½å°†è¿‡æœŸèµ„æºæä¾›ç»™å®¢æˆ·ç«¯ï¼Œå¿½ç•¥è¯·æ±‚çš„"),t("code",[e._v("max-stale")]),e._v("ã€‚")]),e._v(" "),t("li",[t("code",[e._v("proxy-revalidate")]),e._v(": ä¸"),t("code",[e._v("must-revalidate")]),e._v("ä½œç”¨ç›¸åŒï¼Œä»…å¯¹å…±äº«ç¼“å­˜ç”Ÿæ•ˆã€‚")]),e._v(" "),t("li",[t("code",[e._v("max-age=<seconds>")]),e._v(": è®¾ç½®è¯¥å“åº”èµ„æºçš„æœ€å¤§è¿‡æœŸæ—¶é—´ã€‚")]),e._v(" "),t("li",[t("code",[e._v("s-maxage=<seconds>")]),e._v(": è¦†ç›–å…±äº«ç¼“å­˜ä¸­æ‰€æœ‰å…¶ä»–çš„è¿‡æœŸæ—¶é—´æŒ‡ä»¤ã€‚åœ¨ç§æœ‰ç¼“å­˜ä¸­è¢«å¿½ç•¥ã€‚")])])])]),e._v(" "),t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"custom-block-title"},[e._v("ä¸€äº›éœ€è¦æ³¨æ„çš„ç‚¹")]),e._v(" "),t("ul",[t("li",[e._v("éƒ¨åˆ†æŒ‡ä»¤åªèƒ½åœ¨responseæˆ–requestä¸­å‡ºç°ï¼Œä¸”ä¸¤è¾¹éƒ½èƒ½å‡ºç°çš„æ—¶å€™æ„ä¹‰ä¸å®Œå…¨ç›¸åŒã€‚")]),e._v(" "),t("li",[t("code",[e._v("no-cache")]),e._v("æ„æ€æ˜¯å¿…é¡»éªŒè¯ï¼Œä¸ä»£è¡¨ä¸ç¼“å­˜ã€‚"),t("code",[e._v("no-store")]),e._v("ä»£è¡¨ä¸ç¼“å­˜ã€‚")]),e._v(" "),t("li",[t("code",[e._v("no-cache")]),e._v(", "),t("code",[e._v("must-revalidate")]),e._v(", "),t("code",[e._v("max-age=0")]),e._v("çš„åŒºåˆ«ã€‚"),t("code",[e._v("no-cache")]),e._v("å’Œ"),t("code",[e._v("max-age")]),e._v("æ—¢å¯ä»¥åœ¨è¯·æ±‚ä¹Ÿå¯ä»¥å“åº”ä¸­ï¼Œ"),t("code",[e._v("must-revalidate")]),e._v("åªèƒ½åœ¨å“åº”ä¸­ã€‚"),t("code",[e._v("no-cache")]),e._v("ä¸è®ºèµ„æºæ˜¯å¦è¿‡æœŸéƒ½è¦éªŒè¯ï¼Œ"),t("code",[e._v("must-revalidate")]),e._v("åªæœ‰èµ„æºè¿‡æœŸæ—¶å¿…é¡»éªŒè¯ï¼Œ"),t("code",[e._v("max-age=0")]),e._v("ä»£è¡¨èµ„æºå§‹ç»ˆæ˜¯è¿‡æœŸçš„ï¼ˆresponseï¼‰ï¼Œæˆ–è€…è¡¨æ˜è¯·æ±‚å¸Œæœ›å¾—åˆ°çš„èµ„æºæœ€å¤§"),t("code",[e._v("age")]),e._v("ä¸º0ï¼ˆrequestï¼‰ã€‚")])])]),e._v(" "),t("h4",{attrs:{id:"expires-header"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#expires-header"}},[e._v("#")]),e._v(" Expires Header")]),e._v(" "),t("p",[e._v("Syntax:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("Expires: <http-date>\n")])])]),t("p",[e._v("Example:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("Expires: Wed, 21 Oct 2015 07:28:00 GMT\n")])])]),t("p",[e._v("Type: Response Header")]),e._v(" "),t("p",[e._v("å€¼ä¸ºä¸€ä¸ªHTTP-date timestampï¼Œä»…åœ¨å“åº”ä¸­å‡ºç°ï¼Œè®¾ç½®è¯¥èµ„æºçš„è¿‡æœŸæ—¶é—´ï¼Œè¶…è¿‡è¯¥æ—¶é—´è§†ä¸ºstaleã€‚")]),e._v(" "),t("p",[e._v("å¦‚æœå€¼ä¸æ˜¯åˆæ³•çš„HTTP-date timestampï¼Œåˆ™è§†ä¸ºè¯¥èµ„æºå·²ç»è¿‡æœŸã€‚")]),e._v(" "),t("p",[e._v("å¦‚æœ"),t("code",[e._v("Cache-Control")]),e._v("ä¸­è®¾ç½®äº†"),t("code",[e._v("max-age")]),e._v("æˆ–"),t("code",[e._v("s-maxage")]),e._v("ï¼Œè¯¥å­—æ®µè¢«å¿½ç•¥ã€‚")]),e._v(" "),t("h4",{attrs:{id:"etag-header"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#etag-header"}},[e._v("#")]),e._v(" Etag Header")]),e._v(" "),t("p",[e._v("Syntax:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('ETag: W/"<etag_value>"\nETag: "<etag_value>"\n')])])]),t("p",[e._v("Examples:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('ETag: "33a64df551425fcc55e4d42a148795d9f25f89d4"\nETag: W/"0815"\n')])])]),t("p",[e._v("Type: Response Header")]),e._v(" "),t("p",[e._v("å½“å‰èµ„æºçš„Entity Tagï¼Œå¯ä»¥ç”¨äºé…åˆ"),t("code",[e._v("If-Match")]),e._v(", "),t("code",[e._v("If-None-Match")]),e._v(", "),t("code",[e._v("Vary")]),e._v("æ¥åˆ¤æ–­æ˜¯ä¸æ˜¯åŒä¸€èµ„æºã€‚")]),e._v(" "),t("p",[t("code",[e._v("W/")]),e._v("è¡¨æ˜ä½¿ç”¨Weak Validatorã€‚")]),e._v(" "),t("blockquote",[t("p",[e._v("Etagsçš„ç”Ÿæˆæ–¹æ³•æ²¡æœ‰åœ¨HTTPä¸­æŒ‡æ˜ï¼Œå¸¸ç”¨çš„æ–¹æ³•åŒ…æ‹¬å¯¹èµ„æºå†…å®¹è¿›è¡ŒHashï¼Œå¯¹last modification timestampè¿›è¡ŒHashï¼Œæˆ–è€…å•çº¯è®¾å®šä¸€ä¸ªä¿®è®¢ç‰ˆæœ¬å·ã€‚")])]),e._v(" "),t("h4",{attrs:{id:"if-match-header"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#if-match-header"}},[e._v("#")]),e._v(" If-Match Header")]),e._v(" "),t("p",[e._v("Syntax:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("If-Match: <etag_value>\nIf-Match: <etag_value>, <etag_value>, â€¦\n")])])]),t("p",[e._v("Examples:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('If-Match: "bfc13a64729c4290ef5b2c2730249c88ca92d82d"\nIf-Match: W/"67ab43", "54ed21", "7892dd"\nIf-Match: *\n')])])]),t("p",[e._v("Type: Request header")]),e._v(" "),t("p",[e._v("å€¼ä¸ºentity-tagï¼Œä»…åœ¨è¯·æ±‚ä¸­å‡ºç°ã€‚å½“æ‰€è¯·æ±‚èµ„æºçš„entity-tagåŒ¹é…æ—¶ï¼Œè¯¥è¯·æ±‚æ‰ç”Ÿæ•ˆã€‚å¦‚æœæ²¡æœ‰åŒ¹é…èµ„æºï¼Œæˆ–è€…"),t("code",[e._v("If-Match: *")]),e._v("ä½†æ²¡æœ‰èµ„æºå­˜åœ¨æ—¶ï¼ŒæœåŠ¡å™¨ä¸(MUST NOT)æ‰§è¡Œè¯¥è¯·æ±‚ï¼Œ(MUST)è¿”å›"),t("code",[e._v("412 Precondition Failed")]),e._v("ã€‚")]),e._v(" "),t("p",[e._v("å¯¹äºéœ€è¦æ›´æ–°èµ„æºçš„è¯·æ±‚(æ¯”å¦‚PUT)æ¥è¯´ï¼Œåªæœ‰å½“entity-tagåŒ¹é…æ—¶æ‰ä¼šæ›´æ–°èµ„æºã€‚")]),e._v(" "),t("p",[e._v("å¦‚æœä¸€ä¸ªè¯·æ±‚åœ¨ä¸è€ƒè™‘"),t("code",[e._v("If-Match")]),e._v("çš„æƒ…å†µä¸‹ï¼Œå°±ä¼šè¿”å›"),t("code",[e._v("2xx/412")]),e._v("ä¹‹å¤–çš„çŠ¶æ€ï¼Œåˆ™å¿½ç•¥"),t("code",[e._v("If-Match")]),e._v("ã€‚(åº”è¯¥æŒ‡çš„æ˜¯"),t("code",[e._v("If-Match")]),e._v("çš„ä¼˜å…ˆçº§æ¯”è¾ƒä½)")]),e._v(" "),t("p",[e._v("å¦‚æœè¯·æ±‚åŒæ—¶å­˜åœ¨"),t("code",[e._v("If-Match + If-None-Match")]),e._v(" æˆ–è€… "),t("code",[e._v("If-Match + If-Modified-Since")]),e._v("ï¼ŒRFC2616ä¸­æ²¡æœ‰æ˜ç¡®è§„å®šã€‚")]),e._v(" "),t("blockquote",[t("p",[e._v("The result of a request having both an If-Match header field and either an If-None-Match or an If-Modified-Since header fields is undefined by this specification.")])]),e._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[e._v("PS")]),e._v(" "),t("p",[e._v("åœ¨RFC2616ä¸­å†™æ˜ï¼ŒæœåŠ¡å™¨å¿…é¡»ä½¿ç”¨å¼ºéªŒè¯æ¥æ¯”è¾ƒ"),t("code",[e._v("If-Match")]),e._v("ä¸­çš„entity-tagï¼š")]),e._v(" "),t("blockquote",[t("p",[e._v("A server MUST use the strong comparison function (see section 13.3.3) to compare the entity tags in If-Match.")])]),e._v(" "),t("p",[e._v("åœ¨MDNæ–‡æ¡£ä¸­ï¼Œåˆ™è¯´æ˜å¦‚æœåŠ äº†"),t("code",[e._v("W/")]),e._v("å‰ç¼€ï¼Œåˆ™å¯ä»¥ä½¿ç”¨å¼±éªŒè¯:")]),e._v(" "),t("blockquote",[t("p",[e._v("The comparison with the stored ETag uses the strong comparison algorithm, meaning two files are considered identical byte to byte only. This is weakened when the  W/ prefix is used in front of the ETag.")])]),e._v(" "),t("p",[e._v("å¯èƒ½åè€…æ˜¯Mozillaçš„implementationï¼Œåœ¨RFC2616çš„examplesé‡Œé¢æ²¡æœ‰åŠ "),t("code",[e._v("W/")]),e._v("å‰ç¼€çš„ä¾‹å­ï¼Œä¸Šé¢çš„examplesæ˜¯ç”¨çš„MDNä¸Šçš„ã€‚")]),e._v(" "),t("p",[e._v("åœ¨ç¼“å­˜æ–¹é¢å…¶å®ä¸€èˆ¬éƒ½æ˜¯ç”¨"),t("code",[e._v("If-None-Match")]),e._v("ã€‚ä½†æ˜¯"),t("code",[e._v("If-Match")]),e._v("åŠŸèƒ½æ¯”è¾ƒæ¥è¿‘ï¼Œæ‰€ä»¥ä¹Ÿä¸€å¹¶åˆ—å‡ºæ¥äº†ã€‚")])]),e._v(" "),t("h4",{attrs:{id:"if-none-match-header"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#if-none-match-header"}},[e._v("#")]),e._v(" If-None-Match Header")]),e._v(" "),t("p",[e._v("Syntax:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("If-None-Match: <etag_value>\nIf-None-Match: <etag_value>, <etag_value>, â€¦\n")])])]),t("p",[e._v("Examples:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('If-None-Match: "bfc13a64729c4290ef5b2c2730249c88ca92d82d"\nIf-None-Match: W/"67ab43", "54ed21", "7892dd"\nIf-None-Match: *\n')])])]),t("p",[e._v("Type: Request header")]),e._v(" "),t("p",[e._v("å€¼ä¸ºentity-tagï¼Œä»…åœ¨è¯·æ±‚ä¸­å‡ºç°ã€‚å½“æ‰€è¯·æ±‚èµ„æºçš„entity-tagæ²¡æœ‰åŒ¹é…æ—¶ï¼Œè¯¥è¯·æ±‚æ‰ç”Ÿæ•ˆã€‚å¦‚æœå­˜åœ¨åŒ¹é…èµ„æºï¼Œæˆ–è€…"),t("code",[e._v("If-None-Match: *")]),e._v("ä¸”æœ‰èµ„æºå­˜åœ¨æ—¶ï¼ŒæœåŠ¡å™¨ä¸(MUST NOT)æ‰§è¡Œè¯¥è¯·æ±‚ï¼Œä¸”å¯¹äºGETå’ŒHEADè¯·æ±‚åº”è¯¥(SHOULD)è¿”å›"),t("code",[e._v("304 Not Modified")]),e._v("å¹¶æ·»åŠ ç›¸åº”çš„ç¼“å­˜ç›¸å…³headers(ç‰¹åˆ«æ˜¯è¦æ·»åŠ "),t("code",[e._v("ETag")]),e._v(")ï¼Œè€Œå¯¹äºå…¶ä»–è¯·æ±‚æ–¹æ³•(MUST)è¿”å›"),t("code",[e._v("412 Precondition Failed")]),e._v("ã€‚")]),e._v(" "),t("p",[e._v("å¯¹äºéœ€è¦æ›´æ–°èµ„æºçš„è¯·æ±‚(æ¯”å¦‚PUT)æ¥è¯´ï¼Œåªæœ‰ç›¸åº”èµ„æºä¸å­˜åœ¨æ—¶æ‰ä¼šç”Ÿæ•ˆï¼Œå¯ä»¥ç”¨æ¥é¿å…å®¢æˆ·ç«¯å¯¹å·²å­˜åœ¨çš„èµ„æºè¿›è¡Œæ›´æ–°ã€‚")]),e._v(" "),t("p",[e._v("å¦‚æœä¸€ä¸ªè¯·æ±‚çš„"),t("code",[e._v("If-None-Match")]),e._v("æ²¡æœ‰åŒ¹é…åˆ°èµ„æºï¼Œåˆ™æœåŠ¡å™¨å¿…é¡»(MUST)å¿½ç•¥è¯¥è¯·æ±‚ä¸­çš„"),t("code",[e._v("If-Modified-Since")]),e._v("ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåªè¦æ²¡æœ‰entity-tagåŒ¹é…åˆ°ï¼Œä¸ç®¡"),t("code",[e._v("If-Modified-Since")]),e._v("çš„ç»“æœå¦‚ä½•ï¼ŒæœåŠ¡å™¨å°±ä¸èƒ½(MUST NOT)è¿”å›"),t("code",[e._v("304 Not Modified")]),e._v("ã€‚")]),e._v(" "),t("p",[e._v("å¦‚æœä¸€ä¸ªè¯·æ±‚åœ¨ä¸è€ƒè™‘"),t("code",[e._v("If-None-Match")]),e._v("çš„æƒ…å†µä¸‹ï¼Œå°±ä¼šè¿”å›"),t("code",[e._v("2xx/304")]),e._v("(åº”è¯¥è¿˜åŒ…æ‹¬"),t("code",[e._v("412")]),e._v("ï¼Œä½†æ˜¯RFC2616ä¸Šæ²¡å†™æ˜)ä¹‹å¤–çš„çŠ¶æ€ï¼Œåˆ™å¿½ç•¥"),t("code",[e._v("If-None-Match")]),e._v("ã€‚(åŒæ ·åº”è¯¥æŒ‡çš„æ˜¯"),t("code",[e._v("If-None-Match")]),e._v("çš„ä¼˜å…ˆçº§æ¯”è¾ƒä½)")]),e._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[e._v("PS")]),e._v(" "),t("p",[e._v("åœ¨RFC2616ä¸­å†™æ˜ï¼ŒæœåŠ¡å™¨åªèƒ½å¯¹GETå’ŒHEADè¯·æ±‚ä½¿ç”¨å¼±éªŒè¯æ¥æ¯”è¾ƒ"),t("code",[e._v("If-None-Match")]),e._v("ä¸­çš„entity-tagï¼š")]),e._v(" "),t("blockquote",[t("p",[e._v("The weak comparison function can only be used with GET or HEAD requests.")])]),e._v(" "),t("p",[e._v("åœ¨MDNæ–‡æ¡£ä¸­ï¼Œåˆ™åªè¯´æ˜ä½¿ç”¨å¼±éªŒè¯:")]),e._v(" "),t("blockquote",[t("p",[e._v("The comparison with the stored ETag uses the weak comparison algorithm.")])])]),e._v(" "),t("h4",{attrs:{id:"if-modified-since-header"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#if-modified-since-header"}},[e._v("#")]),e._v(" If-Modified-Since Header")]),e._v(" "),t("p",[e._v("Syntax:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("If-Modified-Since: <day-name>, <day> <month> <year> <hour>:<minute>:<second> GMT\n")])])]),t("p",[e._v("Examples:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("If-Modified-Since: Wed, 21 Oct 2015 07:28:00 GMT\n")])])]),t("p",[e._v("Type: Request header")]),e._v(" "),t("p",[e._v("ä»…åœ¨è¯·æ±‚ä¸­å‡ºç°ï¼Œä¸”åªèƒ½åœ¨GETæˆ–HEADä¸­ä½¿ç”¨ã€‚å¦‚æœè¯·æ±‚çš„èµ„æºåœ¨ç»™å®šæ—¶é—´åè¢«ä¿®æ”¹ï¼Œåˆ™åƒæ™®é€šGETè¯·æ±‚ä¸€æ ·è¿”å›"),t("code",[e._v("200")]),e._v("ã€‚å¦‚æœæ²¡æœ‰è¢«ä¿®æ”¹ï¼Œåˆ™è¿”å›"),t("code",[e._v("304 Not Modified")]),e._v("ã€‚")]),e._v(" "),t("p",[e._v("åœ¨å’Œ"),t("code",[e._v("If-None-Match")]),e._v("ä¸€èµ·å‡ºç°æ—¶ï¼Œå°†è¢«å¿½ç•¥ã€‚")]),e._v(" "),t("h4",{attrs:{id:"if-unmodified-since-header"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#if-unmodified-since-header"}},[e._v("#")]),e._v(" If-Unmodified-Since Header")]),e._v(" "),t("p",[e._v("Syntax:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("If-Unmodified-Since: <day-name>, <day> <month> <year> <hour>:<minute>:<second> GMT\n")])])]),t("p",[e._v("Examples:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("If-Unmodified-Since: Wed, 21 Oct 2015 07:28:00 GMT\n")])])]),t("p",[e._v("Type: Request header")]),e._v(" "),t("p",[e._v("ä»…åœ¨è¯·æ±‚ä¸­å‡ºç°ã€‚å¦‚æœè¯·æ±‚çš„èµ„æºåœ¨ç»™å®šæ—¶é—´æ²¡æœ‰è¢«ä¿®æ”¹ï¼Œåˆ™æœåŠ¡å™¨åº”è¯¥(SHOULD)å½“ä½œæ²¡æœ‰"),t("code",[e._v("If-Unmodified-Since")]),e._v("å­˜åœ¨ä¸€æ ·å¤„ç†è¯¥è¯·æ±‚ã€‚å¦‚æœåœ¨ç»™å®šæ—¶é—´åæœ‰è¢«ä¿®æ”¹ï¼Œåˆ™æœåŠ¡å™¨ä¸(MUST NOT)å¤„ç†è¯¥è¯·æ±‚ï¼Œå¹¶è¿”å›"),t("code",[e._v("412 Precondition Failed")]),e._v("ã€‚")]),e._v(" "),t("p",[e._v("å¦‚æœä¸€ä¸ªè¯·æ±‚åœ¨ä¸è€ƒè™‘"),t("code",[e._v("If-Unmodified-Since")]),e._v("çš„æƒ…å†µä¸‹ï¼Œå°±ä¼šè¿”å›"),t("code",[e._v("2xx/412")]),e._v("ä¹‹å¤–çš„çŠ¶æ€ï¼Œåˆ™å¿½ç•¥"),t("code",[e._v("If-Unmodified-Since")]),e._v("ã€‚")]),e._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[e._v("PS")]),e._v(" "),t("p",[e._v("åœ¨ç¼“å­˜æ–¹é¢å…¶å®ä¸€èˆ¬éƒ½æ˜¯ç”¨"),t("code",[e._v("If-Modified-Since")]),e._v("ã€‚ä½†æ˜¯"),t("code",[e._v("If-Unmodified-Since")]),e._v("åŠŸèƒ½æ¯”è¾ƒæ¥è¿‘ï¼Œæ‰€ä»¥ä¹Ÿä¸€å¹¶åˆ—å‡ºæ¥äº†ã€‚")])]),e._v(" "),t("h4",{attrs:{id:"last-modified-header"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#last-modified-header"}},[e._v("#")]),e._v(" Last-Modified Header")]),e._v(" "),t("p",[e._v("Syntax:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("Last-Modified: <day-name>, <day> <month> <year> <hour>:<minute>:<second> GMT\n")])])]),t("p",[e._v("Example:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("Last-Modified: Wed, 21 Oct 2015 07:28:00 GMT\n")])])]),t("p",[e._v("Type: Response Header")]),e._v(" "),t("p",[e._v("ä»…åœ¨å“åº”ä¸­å‡ºç°ï¼Œè¡¨æ˜æºæœåŠ¡å™¨ä¸Šè¯¥èµ„æºçš„æœ€åä¿®æ”¹æ—¶é—´ã€‚å¯ä»¥ç”¨æ¥éªŒè¯èµ„æºæ˜¯å¦æ˜¯ç›¸åŒçš„ï¼Œç²¾ç¡®æ€§æ¯”"),t("code",[e._v("ETag")]),e._v("ä½ï¼Œå¤§éƒ¨åˆ†æƒ…å†µä¸‹ä»…ä½œä¸ºå¤‡ç”¨æœºåˆ¶ã€‚")]),e._v(" "),t("p",[e._v("å¯¹äºè¯¥å€¼çš„å‡†ç¡®æ„ä¹‰ï¼Œä¸æºæœåŠ¡å™¨çš„å®ç°æ–¹å¼å’Œèµ„æºçš„ç±»å‹æœ‰å…³ã€‚å¯¹äºæ–‡ä»¶èµ„æºï¼Œå¯ä»¥æ˜¯filesystemçš„last-modified timeï¼›å¯¹äºæ•°æ®åº“gatewayï¼Œå¯ä»¥æ˜¯è®°å½•çš„last-update timestampç­‰ç­‰ã€‚")]),e._v(" "),t("p",[e._v("æºæœåŠ¡å™¨ä¸èƒ½(MUST NOT)æŠŠ"),t("code",[e._v("Last-Modified")]),e._v("çš„å€¼è®¾ç½®ä¸ºæ¯”æ¶ˆæ¯æº(message originationï¼Œæˆ‘ç†è§£ä¸ºè¯·æ±‚çš„æ—¶é—´)æ›´æ™šçš„æ—¶é—´ã€‚å¦‚æœå¾—åˆ°çš„æ—¶é—´ç¡®å®è¶…è¿‡æ¶ˆæ¯æºæ—¶é—´ï¼Œåˆ™å¿…é¡»(MUST)å°†"),t("code",[e._v("Last-Modified")]),e._v("è®¾ç½®ä¸ºä¸æ¶ˆæ¯æºä¸€æ ·çš„æ—¶é—´ã€‚")]),e._v(" "),t("p",[t("code",[e._v("HTTP/1.1")]),e._v("åº”è¯¥(SHOULD)åœ¨ä»»ä½•å¯è¡Œçš„æƒ…å†µä¸‹ï¼Œå°½å¯èƒ½å‘é€"),t("code",[e._v("Last-Modified")]),e._v(" Headerã€‚")]),e._v(" "),t("h4",{attrs:{id:"vary-header"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#vary-header"}},[e._v("#")]),e._v(" Vary Header")]),e._v(" "),t("p",[e._v("Syntax:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("Vary: *\nVary: <header-name>, <header-name>, ...\n")])])]),t("p",[e._v("Example:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("Vary: User-Agent\n")])])]),t("p",[e._v("Type: Response Header")]),e._v(" "),t("p",[e._v("ä»…åœ¨å“åº”ä¸­å‡ºç°ï¼Œè¡¨æ˜åœ¨åç»­çš„è¯·æ±‚ä¸­ï¼Œè¦æ ¹æ®è®¾ç½®çš„Headeræ¥åˆ¤æ–­æ˜¯å¦èƒ½ä½¿ç”¨è¯¥èµ„æºçš„ç¼“å­˜ã€‚")]),e._v(" "),t("p",[e._v("å¦‚æœè®¾ç½®"),t("code",[e._v("Vary: *")]),e._v("ï¼Œè¡¨æ˜ç¼“å­˜ç³»ç»Ÿæ— æ³•é€šè¿‡Headeræ¥åˆ¤æ–­æ˜¯å¦å¯ä»¥è¿”å›è¯¥èµ„æºï¼Œç›¸å½“äºæ¯ä¸ªä¸åŒçš„è¯·æ±‚éƒ½ä¸èƒ½ä½¿ç”¨è¯¥èµ„æºçš„ç¼“å­˜ã€‚")]),e._v(" "),t("p",[t("code",[e._v("HTTP/1.1")]),e._v("æœåŠ¡å™¨å¯¹åœ¨æ‰€æœ‰å¯ç¼“å­˜çš„å“åº”ä¸­éƒ½åº”è¯¥(SHOULD)åŒ…å«"),t("code",[e._v("Vary")]),e._v(" Headerã€‚")]),e._v(" "),t("blockquote",[t("p",[e._v("å¤§éƒ¨åˆ†å¸¸è§çš„ä¼šç”¨åˆ°"),t("code",[e._v("Accept-Encoding")])])]),e._v(" "),t("h3",{attrs:{id:"expiration-model-todo"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#expiration-model-todo"}},[e._v("#")]),e._v(" Expiration Model [TODO]")]),e._v(" "),t("ul",[t("li",[e._v("å®¢æˆ·ç«¯å‘èµ·è¯·æ±‚ï¼Œæ£€æŸ¥ç¼“å­˜æ˜¯å¦å‘½ä¸­ï¼š\n"),t("ul",[t("li",[e._v("è‹¥è¯·æ±‚æ²¡æœ‰åœ¨ç¼“å­˜ä¸­å‘½ä¸­ï¼Œåˆ™ç›´æ¥å‘æœåŠ¡å™¨è½¬å‘è¯·æ±‚ï¼Œç„¶åç¼“å­˜å“åº”èµ„æºã€‚")]),e._v(" "),t("li",[e._v("è‹¥è¯·æ±‚åœ¨ç¼“å­˜ä¸­å‘½ä¸­ï¼Œæ£€æŸ¥ç¼“å­˜æ˜¯å¦freshï¼š\n"),t("ul",[t("li",[e._v("è‹¥freshï¼Œåˆ™ç›´æ¥è¿”å›ç¼“å­˜èµ„æºï¼ŒçŠ¶æ€ç "),t("code",[e._v("200")])]),e._v(" "),t("li",[e._v("è‹¥staleï¼Œåˆ™é€šè¿‡åœ¨è¯·æ±‚ä¸­æ·»åŠ "),t("code",[e._v("If-None-Match")]),e._v("å‘æœåŠ¡å™¨è¯·æ±‚æ£€æŸ¥èµ„æºæ˜¯å¦freshï¼š\n"),t("ul",[t("li",[e._v("è‹¥è¿”å›"),t("code",[e._v("304 Not Modified")]),e._v("ï¼Œåˆ™ç¼“å­˜é‡ç½®èµ„æº"),t("code",[e._v("Age")]),e._v("ï¼Œå¹¶å°†ç¼“å­˜èµ„æºè¿”å›ç»™å®¢æˆ·ç«¯")]),e._v(" "),t("li",[e._v("è‹¥è¿”å›"),t("code",[e._v("200")]),e._v("ï¼Œåˆ™ç¼“å­˜æ–°çš„èµ„æºï¼Œå¹¶è¿”å›ç»™å®¢æˆ·ç«¯")])])])])])])])]),e._v(" "),t("p",[e._v("èµ„æºâ€œä¿é²œâ€æ—¶é•¿ï¼š")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("freshness_lifetime = `max-age` || (`Expires` - `Date`) || ((`Date` - `Last-Modified`) * 10%)\n")])])]),t("p",[e._v("èµ„æºè¿‡æœŸæ—¶é—´ï¼š")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("expiration_time = response_time + freshness_lifetime - current_age\n")])])]),t("p",[t("code",[e._v("response_time")]),e._v("è¡¨ç¤ºå®¢æˆ·ç«¯æ¥æ”¶åˆ°æ­¤å“åº”çš„æ—¶é—´ç‚¹ã€‚")]),e._v(" "),t("h3",{attrs:{id:"validation-model-todo"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#validation-model-todo"}},[e._v("#")]),e._v(" Validation Model [TODO]")]),e._v(" "),t("h4",{attrs:{id:"last-modified-etag"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#last-modified-etag"}},[e._v("#")]),e._v(" Last-Modified / Etag")]),e._v(" "),t("h4",{attrs:{id:"weak-and-strong-validators"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#weak-and-strong-validators"}},[e._v("#")]),e._v(" Weak and Strong Validators")]),e._v(" "),t("h2",{attrs:{id:"references"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#references"}},[e._v("#")]),e._v(" References")]),e._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Caching",target:"_blank",rel:"noopener noreferrer"}},[e._v("HTTP caching | MDN"),t("OutboundLink")],1)]),e._v(" "),t("li",[t("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Cache-Control",target:"_blank",rel:"noopener noreferrer"}},[e._v("Cache-Control | MDN"),t("OutboundLink")],1)]),e._v(" "),t("li",[t("a",{attrs:{href:"https://www.w3.org/Protocols/rfc2616/rfc2616-sec13.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("HTTP/1.1: Caching in HTTP - RFC2616"),t("OutboundLink")],1)]),e._v(" "),t("li",[t("a",{attrs:{href:"https://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("HTTP/1.1: Header Field Definitions - RFC2616"),t("OutboundLink")],1)]),e._v(" "),t("li",[t("a",{attrs:{href:"https://en.wikipedia.org/wiki/HTTP_ETag",target:"_blank",rel:"noopener noreferrer"}},[e._v("HTTP ETag - WikiPedia"),t("OutboundLink")],1)]),e._v(" "),t("li",[t("a",{attrs:{href:"https://www.cnblogs.com/chyingp/p/no-cache-vs-must-revalidate.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("webæ€§èƒ½ä¼˜åŒ–ä¹‹ï¼šno-cacheä¸must-revalidateæ·±å…¥æ¢ç©¶"),t("OutboundLink")],1)])]),e._v(" "),t("h2",{attrs:{id:"å†™åœ¨åé¢"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å†™åœ¨åé¢"}},[e._v("#")]),e._v(" å†™åœ¨åé¢")]),e._v(" "),t("p",[e._v("ç ”äºŒå¿«ç»“æŸäº†ï¼Œè¿™ä¸€ä¸¤ä¸ªæœˆåœ¨æ‰¾æš‘æœŸå®ä¹ ã€‚")]),e._v(" "),t("p",[e._v("åœ¨é¢è…¾è®¯SNGå‰ç«¯çš„æ—¶å€™ï¼Œå¯¹ç¼“å­˜è¿™éƒ¨åˆ†å¥½åƒæŒºé‡è§†çš„ã€‚ä½†æ˜¯å½“æ—¶è¿˜æ²¡æ€ä¹ˆå¥½å¥½çœ‹è¿‡è¿™éƒ¨åˆ†å†…å®¹ï¼ŒåŸºæœ¬æ²¡ç­”ä¸Šä»€ä¹ˆï¼ŒäºŒé¢é¢è¯•å®˜å°±è®©æˆ‘è¶è¿™ä¸¤ä¸ªæœˆå›å»å¥½å¥½çœ‹çœ‹ã€‚ï¼ˆå¬è¿™è¯çš„æ„æ€å¥½åƒæ˜¯åœ¨è¯´æˆ‘å·²ç»ç¨³äº†ï¼Œä½†æ˜¯æ²¡æƒ³åˆ°HRé¢ä¹‹åå·²ç»è¿‡äº†ä¸€ä¸ªæœˆï¼Œè¿˜æ˜¯æ²¡æœ‰ä»»ä½•æ¶ˆæ¯â€¦â€¦å¥½æ…ŒğŸ˜…ï¼‰")]),e._v(" "),t("p",[e._v("å®ä¹ çš„äº‹å…ˆä¸è®ºï¼Œæƒ³å¥½å¥½åšå‰ç«¯çš„è¯ï¼Œè¿™äº›è¯¥è¡¥çš„è¿˜æ˜¯è¦è¡¥ä¸Šã€‚")]),e._v(" "),t("p",[e._v("----update20180601")]),e._v(" "),t("p",[e._v("æ‹¿åˆ°è…¾è®¯SNGçš„å‰ç«¯å®ä¹ offerå•¦ï¼Œä¸‹ä¸ªæœˆå»æ·±åœ³å®ä¹ ~")])],1)}),[],!1,null,null,null);a.default=_.exports}}]);